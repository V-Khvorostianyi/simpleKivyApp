#:import program program
#:import w wallet_app
#:import sla kivy.adapters.simplelistadapter
#:import hex kivy.utils.get_color_from_hex

<BlueCanvas>:
    canvas.before:
        Color:
            rgba: hex('#36aad0')
        Rectangle:
            size: self.size
            pos: self.pos
<DelCat>:
    Label:
        text: "Del Category"
    DeleteCatDrop
    Button:
        text: "Delete"
        id: del_cat_btn
        on_press: self.parent.parent.remove_widget(root)
<DelAcc>:
    Label:
        text: "Del Account"
    DeleteAccDrop:
    Button:
        text: "Delete"
        id: del_acc_btn
        on_press: self.parent.parent.remove_widget(root)

<AccountAdd>:
    Label:
        text: "Add Account"
    TextInput:
        id: add_account
    Button:
        text: "Add"
        id: add_acc_btn
        on_press: self.parent.parent.remove_widget(root)

<CatAdd>:
    Label:
        text: "Add Category"
    TextInput:
        id: add_category
    Button:
        text: "Add"
        id: add_cat_btn
        on_press: self.parent.parent.remove_widget(root)
<Lb>:
    size: 100, 210
<CategoryScreen>:
    Button:
        text: "Back"
        on_press:
            root.manager.transition.direction = 'right'
            root.manager.current = 'main'

<AccountScreen>:
    Button:
        text: "Back"
        on_press:
            root.manager.transition.direction = 'right'
            root.manager.current = 'main'



<MainView>:
    ListView:
        adapter:
            sla.SimpleListAdapter(
            data=w.search(w.wallet.transaction_list)[1],
            cls=program.Lb
            )

<TransactionScreen>:
    AnchorLayout:
        padding:
            root.width*.1,10,root.width*.1,root.height * 3/4
        GridLayout:
            rows: 2
            spacing:20
            row_force_default: True
            row_default_height: 40
            Button:
                text: "Back"
                on_press:
                    root.manager.transition.direction = 'right'
                    root.manager.current = 'main'
            BoxLayout:
                TextInput:
                Button:
                    text: "Search"
    AnchorLayout:
        padding: root.width*.1,root.height * 1/4,root.width*.1,10
        MainView

<StartScreen>:
    AnchorLayout:
        padding:
            root.width*.1,10,root.width*.1,root.height * 3/4
        HeadTitle:
    AnchorLayout:
        padding: root.width*.1,root.height * 3/4,root.width*.1,10
        GridLayout:
            cols: 2
            Button:
                text: "add new income \ntransaction"
                on_press:
                    root.manager.current = 'add_in_tr'

            Button:
                text: "add new outcome \ntransaction"
                on_press:
                    root.manager.current = 'add_out_tr'

            Button:
                text: "view all income \ntransactions"
                on_press:
                    root.manager.current = 'in_tr_screen'

            Button:
                text: "view all outcome \ntransactions"
                on_press:
                    root.manager.current = 'out_tr_screen'
<HeadTitle>:
    GridLayout:
        rows: 2
        Label:
            text: "MyWallet\n"
        BoxLayout:
            Label:
                text: "\nLast transaction:\n{}".format(w.last_transaction_view())
            Label:
                text: "Accounts:\n{}".format(w.list_view(w.wallet.account_list))

<InputWindow>:
    AnchorLayout:
        padding: 50,0,50, root.height*.1


        GridLayout:
            cols: 1
            row_force_default: True
            row_default_height: 48
            spacing: 60
            Button:
                text: "Back"
                on_press:
                    root.manager.transition.direction = 'right'
                    root.manager.current= "main"
            Label:
                text: "Enter value"
            TextInput:
                id: val
            MyDrop



















